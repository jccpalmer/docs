<<<<<<< HEAD
import { WebSocketHandler, Server, ServerWebSocket } from 'bun';
import { AdapterInstance, AdapterOptions, Peer, Adapter } from '../index.mjs';
=======
import { AdapterInstance, AdapterOptions, Adapter, Peer } from '../index.mjs';
import { WebSocketHandler, Server, ServerWebSocket } from 'bun';
>>>>>>> 2a34df12b795abd1706ff2b3738872cb2458f6fb
import '../shared/crossws.ChIJSJVK.mjs';

interface BunAdapter extends AdapterInstance {
    websocket: WebSocketHandler<ContextData>;
    handleUpgrade(req: Request, server: Server): Promise<Response | undefined>;
}
interface BunOptions extends AdapterOptions {
}
type ContextData = {
    peer?: BunPeer;
    request: Request;
    server?: Server;
<<<<<<< HEAD
    context: Peer["context"];
};
declare const bunAdapter: Adapter<BunAdapter, BunOptions>;
=======
};
declare const _default: Adapter<BunAdapter, BunOptions>;
>>>>>>> 2a34df12b795abd1706ff2b3738872cb2458f6fb

declare class BunPeer extends Peer<{
    ws: ServerWebSocket<ContextData>;
    request: Request;
    peers: Set<BunPeer>;
}> {
    get remoteAddress(): string;
<<<<<<< HEAD
    get context(): Peer["context"];
=======
>>>>>>> 2a34df12b795abd1706ff2b3738872cb2458f6fb
    send(data: unknown, options?: {
        compress?: boolean;
    }): number;
    publish(topic: string, data: unknown, options?: {
        compress?: boolean;
    }): number;
    subscribe(topic: string): void;
    unsubscribe(topic: string): void;
    close(code?: number, reason?: string): void;
    terminate(): void;
}

<<<<<<< HEAD
export { type BunAdapter, type BunOptions, bunAdapter as default };
=======
export { type BunAdapter, type BunOptions, _default as default };
>>>>>>> 2a34df12b795abd1706ff2b3738872cb2458f6fb
